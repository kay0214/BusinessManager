<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>工作台</title>
    <link rel="stylesheet" href="/layui/css/layui.css">
</head>
<body>
<div class="layui-body">
    <!-- 内容主体区域 -->
    <div style="padding: 15px;"><table class="layui-hide" id="menu"></table></div>
    <script src="/layui/layui.js"></script>
    <script>
        var editObj=null,ptable=null,treeGrid=null,tableId='menu',layer=null;
        layui.config({
            base: '/layui/'
        }).extend({
            treeGrid:'treeGrid'
        }).use(['jquery','treeGrid','layer'], function(){
            var $=layui.jquery;
            treeGrid = layui.treeGrid;//很重要
            layer=layui.layer;
            ptable=treeGrid.render({
                id:tableId
                ,elem: '#'+tableId
                ,url:'/system/menu/getAllMenus'
                ,cellMinWidth: 100
                ,idField:'menuId'//必須字段
                ,treeId:'menuId'//树形id字段名称
                ,treeUpId:'parentId'//树形父id字段名称
                ,treeShowName:'menuName'//以树形式显示的字段
                ,heightRemove:[".dHead",30]//不计算的高度,表格设定的是固定高度，此项不生效
                ,isFilter:false
                ,height: '50%'
                ,iconOpen:false//是否显示图标【默认显示】
                ,isOpenDefault:false//节点默认是展开还是折叠【默认展开】
                ,loading:true
                ,method:'get'
                ,isPage:false
                ,skin: 'line'
                ,response:{
                    statusName:"status"
                    ,statusCode:'S001'
                    ,msgName:"statusDesc"
                    ,countName:"totalCount"
                    ,dataName:"data"
                }
                ,cols: [
                    [
                        {field:'menuName', width:150, title: '菜单名'}
                        ,{field:'orderNum', width:80, title: '排序'}
                        ,{field:'url', width:150, title: '请求地址'}
                        ,{field:'menuType', title: '类型',width:80,templet:function (data) {
                            if(data.menuType==='M'){
                                return "<span class='layui-badge layui-bg-blue'>目录</span>";
                            }else if(data.menuType==='C'){
                                return "<span class='layui-badge layui-bg-green'>菜单</span>";
                            }else if(data.menuType==='F'){
                                return "<span class='layui-badge layui-bg-orange'>权限</span>";
                            }else{
                                return "<span class='layui-badge-rim'>预留状态</span>";
                            }
                        }}
                        ,{field:'visible', title: '显示与隐藏',templet:function (data) {
                            if(data.visible===0){
                                return "<span class='layui-badge'>显示</span>";
                            }else if(data.visible===1){
                                return "<span class='layui-badge layui-bg-gray'>隐藏</span>";
                            }else{
                                return "<span class='layui-badge-rim'>预留状态</span>";
                            }
                        }}
                        ,{field:'perms', title: '权限标识'}
                        ,{field:'isDefault', title: '默认权限',templet:function (data) {
                            if(data.isDefault===0){
                                return "否";
                            }else if(data.isDefault===1){
                                return "是";
                            }else{
                                return "预留状态";
                            }
                        }}
                    ]
                ]
                ,parseData:function (res) {//数据加载后回调
                    return res;
                }
                ,onClickRow:function (index, o) {
                    console.log(index,o,"单击！");
                    console.info("单击！,按F12，在控制台查看详细参数！");
                }
                ,onDblClickRow:function (index, o) {
                    console.log(index,o,"双击");
                    console.info("双击！,按F12，在控制台查看详细参数！");
                }
                ,onCheck:function (obj,checked,isAll) {//复选事件
                    console.log(obj,checked,isAll,"复选");
                    console.info("复选,按F12，在控制台查看详细参数！");
                }
                ,onRadio:function (obj) {//单选事件
                    console.log(obj,"单选");
                    console.info("单选,按F12，在控制台查看详细参数！");
                }
            });

            treeGrid.on('tool('+tableId+')',function (obj) {
                if(obj.event === 'del'){//删除行
                    console.info(obj);
                }else if(obj.event==="add"){//添加行
                    console.info(obj);
                }
            });
        });

    </script>
</div>
</body>
</html>